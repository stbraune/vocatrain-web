<h3>
  {{'statistics.title' | translate}}
</h3>

<div class="flex">
  <mat-card class="flex-col flex-col--1 margin--bottom">
    <mat-card-title>
      {{'statistics.totals' | translate}}
    </mat-card-title>
    <ng-container *ngFor="let total of totalsOverall">
      <mat-card-subtitle>
        {{('statistics.mode.' + total.key[0]) | translate}}
      </mat-card-subtitle>
      <mat-card-content>
        <p>
          <em>{{'statistics.total-duration' | translate}}</em>
          {{formatSeconds(total.value.durationInMillis / 1000)}}
        </p>
        <p>
          <em>{{'statistics.correct-words' | translate}}</em>
          {{total.value.countCorrect}}
        </p>
        <p>
          <em>{{'statistics.wrong-words' | translate}}</em>
          {{total.value.countWrong}}
        </p>
        <p>
          <em>{{'statistics.total-words' | translate}}</em>
          {{total.value.countTotal}}
        </p>
        <p>
          <em>{{'statistics.average-per-word' | translate}}</em>
          {{formatSeconds(total.value.durationInMillis / total.value.countTotal / 1000)}}
        </p>
      </mat-card-content>
    </ng-container>
  </mat-card>
  
  <mat-card class="flex-col flex-col--1 margin--bottom">
    <mat-card-title>
      {{'statistics.last30' | translate}}
    </mat-card-title>
    <ng-container *ngFor="let total of totalsLast30">
      <mat-card-subtitle>
        {{('statistics.mode.' + total.key[0]) | translate}}
      </mat-card-subtitle>
      <mat-card-content>
        <p>
          <em>{{'statistics.total-duration' | translate}}</em>
          {{formatSeconds(total.value.durationInMillis / 1000)}}
        </p>
        <p>
          <em>{{'statistics.correct-words' | translate}}</em>
          {{total.value.countCorrect}}
        </p>
        <p>
          <em>{{'statistics.wrong-words' | translate}}</em>
          {{total.value.countWrong}}
        </p>
        <p>
          <em>{{'statistics.total-words' | translate}}</em>
          {{total.value.countTotal}}
        </p>
        <p>
          <em>{{'statistics.average-per-word' | translate}}</em>
          {{formatSeconds(total.value.durationInMillis / total.value.countTotal / 1000)}}
        </p>
      </mat-card-content>
    </ng-container>
  </mat-card>
</div>

<div class="flex">
  <mat-card *ngFor="let wordsPerLevel of wordsPerLevels" class="flex-col flex-col--1 margin--bottom">
    <mat-card-title>
      {{'statistics.words-per-level' | translate}}
    </mat-card-title>
    <mat-card-subtitle>
      {{('statistics.mode.' + wordsPerLevel.key[0]) | translate}}, {{'statistics.to' | translate}} {{wordsPerLevel.key[1] | translate}}
    </mat-card-subtitle>
    <mat-card-content>
      <div style="display: block; overflow: auto;">
        <ngx-charts-bar-horizontal
          scheme="forest"
          [view]="[300, 200]"
          [results]="wordsPerLevel.value"
          [yAxis]="true">
        </ngx-charts-bar-horizontal>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<mat-card>
  <mat-card-content>
    <pre>{{last30 | json}}</pre>
  </mat-card-content>
</mat-card>
